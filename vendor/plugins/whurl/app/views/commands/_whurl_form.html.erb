<%= javascript_include_tag('whurl/jquery.min.js') %>
<%= javascript_include_tag('whurl/application') %>

<div class="top">
  <% form_tag(whurls_path, :id => "whurl_form", :method => :get) do %>

      <div class="row">
        <div class="section_title"><span class="hTitle">URL</span></div>
        <%= select_tag(:method, options_for_select(["GET", "POST", "PUT", "DELETE"], @command.method)) %> /
        <%= text_field_tag('url', @command.url, :class => "long") %>
      </div>

      <div class="row">
        <div class="section_title">
          <div class="hTitle">
            <a id="add_header"><%= image_tag('whurl/add.png', :class => 'action_button') %></a>
            Headers
          </div>
        </div>
        <div id="headers">
          <%= render :partial => 'whurl_input_set', :locals => {:set_name => 'header', :key => nil, :value => nil, :disabled => true} %>
          <% begin -%>
            <%= render :partial => 'whurl_input_set', :locals => {:set_name => 'header', :key => @command.header_keys.try(:shift), :value => @command.header_values.try(:shift), :disabled => false} %>
          <% end while @command.header_keys.present? -%>
        </div>
      </div>

      <div class="row">
        <div class="section_title">
          <div class="hTitle"><a id="add_param"><%= image_tag('whurl/add.png', :class => 'action_button') %></a>
            Params
          </div>
        </div>
        <div id="params">
          <%= render :partial => 'whurl_input_set', :locals => {:set_name => 'param', :key => nil, :value => nil, :disabled => true} %>
          <% begin -%>
              <%= render :partial => 'whurl_input_set', :locals => {:set_name => 'param', :key => @command.param_keys.try(:shift), :value => @command.param_values.try(:shift), :disabled => false} %>
          <% end while @command.param_keys.present? -%>
        </div>
      </div>
      <input type="submit" value="Give it a Whurl!" class="submit"/>
  <% end %>
</div>